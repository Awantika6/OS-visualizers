<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process Architect | Gaming Logic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .glass-sidebar { background: #ffffff; border-right: 1px solid #e2e8f0; }
        .glass-right-bar { background: #ffffff; border-left: 1px solid #e2e8f0; }
        .state-card { background: #f1f5f9; border-radius: 1.25rem; padding: 1rem; border: 1px solid #e2e8f0; }
        .node-box { background: #ffffff; border: 2px solid #e2e8f0; border-radius: 2rem; transition: all 0.3s ease; position: relative; }
        .active-glow { border-color: #6366f1; box-shadow: 0 10px 30px rgba(99, 102, 241, 0.1); }
        .process-chip { animation: pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        @keyframes pop { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .log-entry { 
            animation: slideIn 0.3s ease-out; 
            border-bottom: 1px solid #e2e8f0; 
            padding: 10px 0;
            color: #475569;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="overflow-hidden">

<div class="flex h-screen">
    <aside class="w-80 glass-sidebar p-6 overflow-y-auto scrollbar-hide flex flex-col gap-6">
        <h1 class="text-xl font-black text-indigo-600 tracking-tighter flex items-center gap-2">
            <i class="fas fa-microchip"></i> OS Process States
        </h1>

        <div class="space-y-4">
            <div class="state-card border-l-4 border-l-slate-400">
                <h4 class="text-[10px] font-black text-slate-500 uppercase">1. NEW</h4>
                <p class="text-[10px] text-slate-600 mt-1"><b>Theory:</b> OS creates a task ID and allocates initial memory.</p>
                <p class="text-[10px] text-indigo-600 font-bold uppercase italic mt-1">Task: Unpacking 3D Models.</p>
            </div>
            <div class="state-card border-l-4 border-l-emerald-500">
                <h4 class="text-[10px] font-black text-emerald-600 uppercase">2. READY</h4>
                <p class="text-[10px] text-slate-600 mt-1"><b>Theory:</b> Process in RAM waiting for CPU turn.</p>
                <p class="text-[10px] text-indigo-600 font-bold uppercase italic mt-1">Task: Standing by in Lobby.</p>
            </div>
            <div class="state-card border-l-4 border-l-indigo-600">
                <h4 class="text-[10px] font-black text-indigo-600 uppercase">3. RUNNING</h4>
                <p class="text-[10px] text-slate-600 mt-1"><b>Theory:</b> Instructions executing on core.</p>
                <p class="text-[10px] text-indigo-600 font-bold uppercase italic mt-1">Task: Rendering 4K Frames.</p>
            </div>
            <div class="state-card border-l-4 border-l-amber-500">
                <h4 class="text-[10px] font-black text-amber-600 uppercase">4. WAITING</h4>
                <p class="text-[10px] text-slate-600 mt-1"><b>Theory:</b> Blocked until I/O finishes.</p>
                <p class="text-[10px] text-indigo-600 font-bold uppercase italic mt-1">Task: Syncing Net Lag.</p>
            </div>
            <div class="state-card border-l-4 border-l-rose-400">
                <h4 class="text-[10px] font-black uppercase text-rose-500 mb-2">5. Terminated</h4>
                <p class="text-[11px] leading-relaxed text-slate-600 italic">Theory: Task is done and resources are reclaimed.</p>
                <p class="text-[10px] font-bold text-indigo-600 mt-2">Task: Garbage Collection.</p>
            </div>
        </div>
    </aside>

    <main class="flex-1 p-8 overflow-y-auto bg-slate-50/50">
        <div class="max-w-4xl mx-auto space-y-8">
            <div class="flex justify-between items-center bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm">
                <h2 class="text-xl font-black text-slate-800 uppercase tracking-widest">Visual Workspace</h2>
                <div class="flex gap-3">
                    <button onclick="spawnTask()" class="bg-indigo-600 text-white px-6 py-2 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100">
                        <i class="fas fa-plus mr-2"></i> Task Process
                    </button>
                    <div id="cpu-status" class="px-4 py-2 bg-slate-100 rounded-xl text-[10px] font-black text-slate-400">CPU: IDLE</div>
                </div>
            </div>

            <div class="relative h-[550px] w-full border-2 border-slate-200 rounded-[3rem] p-10 bg-white shadow-sm overflow-hidden">
                <div id="node-New" class="absolute top-10 left-10 w-32 h-32 node-box border-dashed flex flex-col items-center justify-center">
                    <span class="text-[9px] font-black text-slate-300 uppercase">New</span>
                    <div id="box-New" class="flex flex-wrap gap-1 mt-2"></div>
                </div>
                <div id="node-Ready" class="absolute top-1/2 left-10 -translate-y-1/2 w-44 h-44 node-box flex flex-col items-center justify-center">
                    <span class="text-[9px] font-black text-emerald-500 uppercase mb-4">Ready</span>
                    <div id="box-Ready" class="flex flex-wrap gap-2 justify-center px-4"></div>
                </div>
                <div id="node-Running" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 rounded-full border-4 border-slate-100 flex flex-col items-center justify-center bg-slate-50 shadow-inner">
                    <span class="text-[10px] font-black text-indigo-600 uppercase mb-4">Core 0</span>
                    <div id="box-Running"></div>
                </div>
                <div id="node-Waiting" class="absolute bottom-10 right-10 w-64 h-36 node-box flex flex-col items-center justify-center">
                    <span class="text-[10px] font-black text-amber-500 uppercase mb-4">Waiting</span>
                    <div id="box-Waiting" class="flex flex-wrap gap-2 justify-center px-4"></div>
                </div>
                <div id="node-Terminated" class="absolute top-10 right-10 w-32 h-32 node-box border-dashed flex flex-col items-center justify-center">
                    <span class="text-[9px] font-black text-rose-300 uppercase">Term</span>
                    <div id="box-Terminated" class="flex flex-wrap gap-1 mt-2"></div>
                </div>
            </div>

            <div id="controls" class="grid grid-cols-1 md:grid-cols-2 gap-4 pb-10"></div>
        </div>
    </main>

    <aside class="w-96 glass-right-bar p-6 flex flex-col gap-4 bg-slate-50">
        <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm mb-2">
            <div class="flex justify-between items-center mb-2">
                <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">System Load</span>
                <span id="ram-val" class="text-[10px] font-black text-indigo-600">0%</span>
            </div>
            <div class="w-full h-2 bg-slate-100 rounded-full overflow-hidden border border-slate-200">
                <div id="ram-bar" class="h-full bg-indigo-500 transition-all duration-500" style="width: 0%"></div>
            </div>
        </div>

        <h3 class="text-[11px] font-black text-indigo-600 uppercase tracking-[0.2em] mb-2 flex items-center gap-2">
            <i class="fas fa-terminal"></i> Hardware Event Logs
        </h3>
        <div id="log-panel" class="flex-1 overflow-y-auto scrollbar-hide text-[10px] font-mono space-y-1">
            <div class="text-slate-400 italic">>> Kernel initialized. Awaiting process spawn...</div>
        </div>
    </aside>
</div>

<script>
    const NAMES = ["Frost-Engine", "Shadow-Physics", "Neon-Shader", "Apex-Audio", "Pixel-Burst", "Titan-Sync"];
    const COLORS = ["bg-indigo-500", "bg-emerald-500", "bg-blue-500", "bg-violet-500", "bg-cyan-500", "bg-rose-500"];
    let tasks = [];

    function addLog(message) {
        const panel = document.getElementById('log-panel');
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `<span class="text-indigo-600 font-bold">>></span> ${message}`;
        panel.prepend(entry);
    }

    function spawnTask() {
        const id = Math.floor(Math.random() * 900) + 100;
        const name = NAMES[Math.floor(Math.random() * NAMES.length)];
        const color = COLORS[Math.floor(Math.random() * COLORS.length)];
        tasks.push({ id, name, color, state: 'New' });
        addLog(`SPAWN: Created thread ${name} (#${id}). Memory entry initialized on Disk.`);
        updateUI();
    }

    function move(id, newState) {
        const t = tasks.find(task => task.id === id);
        if (newState === 'Running' && tasks.some(task => task.state === 'Running')) {
            addLog(`ERROR: CPU Contention. Thread #${id} blocked by active process.`);
            alert("CPU BUSY: Terminate or Block current task first.");
            return;
        }

        const logs = {
            'Ready': `ADMIT: Task #${id} (${t.name}) moved to RAM cache. Ready for dispatch.`,
            'Running': `EXECUTE: CPU Core 0 assigned to ${t.name}. Processing gaming instructions...`,
            'Waiting': `I/O BLOCK: ${t.name} suspended. Waiting for network packet/lag resolution.`,
            'Terminated': `EXIT: Task #${id} complete. Clearing RAM and performing Garbage Collection.`
        };

        addLog(logs[newState]);
        t.state = newState;
        updateUI();
    }

    function updateUI() {
        const states = ['New', 'Ready', 'Running', 'Waiting', 'Terminated'];
        states.forEach(s => {
            const box = document.getElementById(`box-${s}`);
            const node = document.getElementById(`node-${s}`);
            box.innerHTML = '';
            const filtered = tasks.filter(t => t.state === s);
            filtered.length > 0 ? node.classList.add('active-glow') : node.classList.remove('active-glow');
            filtered.forEach(t => {
                box.innerHTML += `<div class="${t.color} p-2 rounded-lg text-white shadow-md process-chip"><i class="fas fa-gamepad text-[8px]"></i></div>`;
            });
        });

        const running = tasks.find(t => t.state === 'Running');
        const statusEl = document.getElementById('cpu-status');
        statusEl.innerText = running ? `EXECUTING: ${running.name}` : "CPU: IDLE";
        statusEl.className = running ? "px-4 py-2 bg-indigo-50 rounded-xl text-[10px] font-black text-indigo-600" : "px-4 py-2 bg-slate-100 rounded-xl text-[10px] font-black text-slate-400";

        // Logic for Load Bar: Calculated by tasks using RAM (Ready + Running)
        const ramTasks = tasks.filter(t => t.state === 'Ready' || t.state === 'Running').length;
        const ramPerc = Math.min(ramTasks * 20, 100);
        document.getElementById('ram-bar').style.width = ramPerc + '%';
        document.getElementById('ram-val').innerText = ramPerc + '%';

        const controls = document.getElementById('controls');
        const active = tasks.filter(t => t.state !== 'Terminated');
        controls.innerHTML = active.map(t => `
            <div class="bg-white p-5 rounded-[2rem] border border-slate-200 shadow-sm space-y-3">
                <div class="flex justify-between items-center">
                    <span class="text-[10px] font-black text-slate-400 uppercase">${t.name} (#${t.id})</span>
                    <span class="text-[8px] font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full uppercase">${t.state}</span>
                </div>
                <div class="flex gap-1">
                    ${t.state === 'New' ? `<button onclick="move(${t.id}, 'Ready')" class="flex-1 bg-slate-800 text-white py-1.5 rounded-xl text-[9px] font-black uppercase hover:bg-slate-700 transition">Admit</button>` : ''}
                    ${t.state === 'Ready' ? `<button onclick="move(${t.id}, 'Running')" class="flex-1 bg-indigo-600 text-white py-1.5 rounded-xl text-[9px] font-black uppercase hover:bg-indigo-500 transition">Dispatch</button>` : ''}
                    ${t.state === 'Running' ? `
                        <button onclick="move(${t.id}, 'Waiting')" class="flex-1 bg-amber-500 text-white py-1.5 rounded-xl text-[9px] font-black uppercase hover:bg-amber-400 transition">Lag Spike</button>
                        <button onclick="move(${t.id}, 'Terminated')" class="flex-1 bg-rose-500 text-white py-1.5 rounded-xl text-[9px] font-black uppercase hover:bg-rose-400 transition">Quit</button>
                    ` : ''}
                    ${t.state === 'Waiting' ? `<button onclick="move(${t.id}, 'Ready')" class="flex-1 bg-emerald-500 text-white py-1.5 rounded-xl text-[9px] font-black uppercase hover:bg-emerald-400 transition">Reconnect</button>` : ''}
                </div>
            </div>
        `).join('');
    }
</script>
</body>
</html>